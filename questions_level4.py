# questions_level4.py
# Level 4: Troubleshooting & Thinking
# Mix of scenario multiple-choice and typing drills.
# Note: typing answers are exact-match with current engine.py.

level4_questions = [
    {
        'type': 'mc',
        'question': "You run a command and get: 'command not found'. What's the most likely cause?",
        'options': [
            'The file is corrupted',
            "The command isn't installed or isn't in your PATH",
            'Your disk is full',
        ],
        'answer': 2,
        'answer_text': "The command isn't installed or isn't in your PATH",
        'explanation': "This usually means the program isn't installed, or the shell can't find it in any directory listed in $PATH.",
        'why': 'Helps you diagnose quickly instead of guessing randomly.',
    },
    {
        'type': 'mc',
        'question': "You try to run a script and get: 'Permission denied'. What is the best first fix?",
        'options': [
            'Reboot the computer',
            'Make it executable (chmod +x) or run with bash',
            'Delete the file and recreate it',
        ],
        'answer': 2,
        'answer_text': 'Make it executable (chmod +x) or run with bash',
        'explanation': 'Often the file lacks execute permission, or you need to run it with an interpreter (bash script.sh).',
        'why': 'Common beginner error; easy win once you recognize it.',
    },
    {
        'type': 'mc',
        'question': "You try 'sudo apt install something' and get: 'Unable to locate package'. Best first step?",
        'options': [
            'Run sudo apt update',
            'Run sudo apt clean',
            'Run chmod 777 /',
        ],
        'answer': 1,
        'answer_text': 'Run sudo apt update',
        'explanation': 'Your package lists may be outdated; update refreshes repository info.',
        'why': 'Fixes a very common apt problem safely.',
    },
    {
        'type': 'mc',
        'question': "A program says: 'No such file or directory' when opening a file path. Most likely meaning?",
        'options': [
            "The file doesn't exist at that path (or a parent folder doesn't)",
            'The file is too large',
            'The network is down',
        ],
        'answer': 1,
        'answer_text': "The file doesn't exist at that path (or a parent folder doesn't)",
        'explanation': "It usually means the path is wrong or the file/folder truly isn't there.",
        'why': 'Teaches precise error reading.',
    },
    {
        'type': 'mc',
        'question': "You edited /etc/hosts but couldn't save due to permissions. Why?",
        'options': [
            'The editor is broken',
            'The file requires root privileges to modify',
            'Your keyboard layout is wrong',
        ],
        'answer': 2,
        'answer_text': 'The file requires root privileges to modify',
        'explanation': '/etc/hosts is protected; you must edit with sudo (or use sudoedit).',
        'why': 'Prevents confusion when editing system files.',
    },
    {
        'type': 'mc',
        'question': "Wi‑Fi shows connected, but websites don't load. What should you test FIRST?",
        'options': [
            'Run ping 8.8.8.8',
            'Reinstall Linux',
            'Delete your home folder',
        ],
        'answer': 1,
        'answer_text': 'Run ping 8.8.8.8',
        'explanation': 'Pinging an IP checks basic network connectivity without involving DNS.',
        'why': "Separates 'network' problems from 'DNS' problems.",
    },
    {
        'type': 'mc',
        'question': 'You can ping 8.8.8.8 but NOT google.com. What is the likely problem?',
        'options': [
            'DNS resolution',
            'GPU driver',
            'File permissions',
        ],
        'answer': 1,
        'answer_text': 'DNS resolution',
        'explanation': "If IP works but names don't, DNS is the likely culprit.",
        'why': 'Classic troubleshooting decision point.',
    },
    {
        'type': 'mc',
        'question': "A drive is 'full' but you don't see huge files. Which command helps find large folders quickly?",
        'options': [
            'du -sh *',
            'pwd -l',
            'whoami -h',
        ],
        'answer': 1,
        'answer_text': 'du -sh *',
        'explanation': 'du shows disk usage; combined with * it summarizes each item in the folder.',
        'why': 'Points you at where space is actually being used.',
    },
    {
        'type': 'mc',
        'question': 'You unplug a USB drive and later see corruption. Best habit to prevent this?',
        'options': [
            'Always run umount before unplugging',
            'Always reboot before unplugging',
            'Always run apt update first',
        ],
        'answer': 1,
        'answer_text': 'Always run umount before unplugging',
        'explanation': 'Unmount flushes pending writes and safely detaches the filesystem.',
        'why': 'Prevents real data loss.',
    },
    {
        'type': 'mc',
        'question': "A program is frozen. What's the preferred first step to close it politely?",
        'options': [
            'kill -9 immediately',
            'Try closing normally, or use kill -15 (SIGTERM)',
            'Format your disk',
        ],
        'answer': 2,
        'answer_text': 'Try closing normally, or use kill -15 (SIGTERM)',
        'explanation': 'SIGTERM asks the process to exit cleanly; SIGKILL (-9) is a last resort.',
        'why': 'Good habits avoid data loss.',
    },
    {
        'type': 'mc',
        'question': "You get 'Permission denied' when accessing a file. Most likely cause?",
        'options': [
            'Wrong permissions/ownership',
            'CPU overheating',
            'Bad HDMI cable',
        ],
        'answer': 1,
        'answer_text': 'Wrong permissions/ownership',
        'explanation': "Either you don't have read/write/execute permission, or the file is owned by another user/root.",
        'why': "Teaches the 'permissions first' mindset.",
    },
    {
        'type': 'mc',
        'question': "A service won't start. What's the best FIRST command to see its status and recent errors?",
        'options': [
            'sudo systemctl status <service>',
            'sudo chmod 777 <service>',
            'sudo apt clean',
        ],
        'answer': 1,
        'answer_text': 'sudo systemctl status <service>',
        'explanation': "systemctl status shows whether it's running and recent log lines.",
        'why': 'Faster than guessing.',
    },
    {
        'type': 'mc',
        'question': 'A service failed to start and you want more logs. Which command is most likely to help?',
        'options': [
            'journalctl -xe',
            'df -h',
            'lsblk -xe',
        ],
        'answer': 1,
        'answer_text': 'journalctl -xe',
        'explanation': 'The systemd journal often contains the reason services fail.',
        'why': 'Logs turn mysteries into facts.',
    },
    {
        'type': 'mc',
        'question': "Your system is slow. What's a good first command to see CPU/RAM heavy processes?",
        'options': [
            'top',
            'mkdir',
            'tar',
        ],
        'answer': 1,
        'answer_text': 'top',
        'explanation': 'top shows real-time process CPU and memory usage.',
        'why': 'Helps you find the culprit quickly.',
    },
    {
        'type': 'mc',
        'question': 'You ran a command and it produced too much output to read. Best tool?',
        'options': [
            'less',
            'rm',
            'touch',
        ],
        'answer': 1,
        'answer_text': 'less',
        'explanation': 'less lets you scroll and search output.',
        'why': 'Makes big output manageable.',
    },
    {
        'type': 'mc',
        'question': 'You suspect a USB device failed to initialize. What command shows kernel hardware messages?',
        'options': [
            'dmesg',
            'ps aux',
            'apt search',
        ],
        'answer': 1,
        'answer_text': 'dmesg',
        'explanation': 'dmesg reports kernel messages about hardware, drivers, and device events.',
        'why': 'A go-to for USB/Wi‑Fi troubleshooting.',
    },
    {
        'type': 'mc',
        'question': 'A command works with sudo but fails without sudo. What does that suggest?',
        'options': [
            'The command is broken',
            "It needs elevated permissions to do what it's doing",
            'Your PATH is empty',
        ],
        'answer': 2,
        'answer_text': "It needs elevated permissions to do what it's doing",
        'explanation': 'It likely touches protected files or system settings.',
        'why': 'Helps you understand when sudo is appropriate.',
    },
    {
        'type': 'mc',
        'question': "You installed a program but still get 'command not found'. What is a good thing to check?",
        'options': [
            '$PATH and the package name / executable name',
            'Your monitor cable',
            'The weather',
        ],
        'answer': 1,
        'answer_text': '$PATH and the package name / executable name',
        'explanation': 'The executable might have a different name, or PATH might not include where it lives.',
        'why': "Teaches real-world 'installed but not found' situations.",
    },
    {
        'type': 'mc',
        'question': "You typed a command but it says: 'Is a directory'. What happened?",
        'options': [
            'You gave a directory where a file was expected',
            'Your disk is encrypted',
            'Your CPU is too slow',
        ],
        'answer': 1,
        'answer_text': 'You gave a directory where a file was expected',
        'explanation': 'The path points to a folder, not a file/command.',
        'why': 'Helps interpret common error messages.',
    },
    {
        'type': 'mc',
        'question': "You see: 'Text file busy'. Likely meaning?",
        'options': [
            'The file is currently being used by a running process',
            'The file is hidden',
            'The file is a virus',
        ],
        'answer': 1,
        'answer_text': 'The file is currently being used by a running process',
        'explanation': "Some files can't be replaced/executed while in use.",
        'why': "Helps you think: 'what process is holding it?'",
    },
    {
        'type': 'mc',
        'question': "You can't delete a file because it says 'Operation not permitted'. Common cause?",
        'options': [
            'Immutable flag or permissions/ownership issue',
            'Too many browser tabs',
            'Wrong font',
        ],
        'answer': 1,
        'answer_text': 'Immutable flag or permissions/ownership issue',
        'explanation': 'Usually permissions/ownership, sometimes a special attribute like immutable.',
        'why': 'Pushes you toward checking permissions first.',
    },
    {
        'type': 'mc',
        'question': 'You used rm with a wildcard and removed the wrong files. Best prevention habit?',
        'options': [
            'Use ls with the same pattern first',
            'Never use Linux again',
            'Always run as root',
        ],
        'answer': 1,
        'answer_text': 'Use ls with the same pattern first',
        'explanation': 'Preview what a wildcard matches before deleting.',
        'why': 'Safety habit that saves headaches.',
    },
    {
        'type': 'mc',
        'question': 'You edited a config file, restarted the service, and it still uses old settings. Best first check?',
        'options': [
            'Did you restart the correct service / is it running the config you edited?',
            'Buy a new computer',
            'Rename /etc',
        ],
        'answer': 1,
        'answer_text': 'Did you restart the correct service / is it running the config you edited?',
        'explanation': "Sometimes you edited the wrong file or didn't restart the correct service instance.",
        'why': 'Teaches practical verification.',
    },
    {
        'type': 'mc',
        'question': 'You run a GUI app from terminal and it prints errors. Why is that useful?',
        'options': [
            'The terminal output can reveal missing libraries or errors',
            'It speeds up the app',
            'It encrypts your files',
        ],
        'answer': 1,
        'answer_text': 'The terminal output can reveal missing libraries or errors',
        'explanation': 'Launching from terminal often shows useful debug output.',
        'why': 'Beginners discover this trick late—great to teach early.',
    },
    {
        'type': 'mc',
        'question': "You see: 'Read-only file system'. Most likely scenario?",
        'options': [
            'The filesystem was mounted read-only due to errors',
            'Your keyboard is broken',
            'You forgot to type sudo',
        ],
        'answer': 1,
        'answer_text': 'The filesystem was mounted read-only due to errors',
        'explanation': 'Linux may mount a filesystem read-only to protect it after errors.',
        'why': 'This is a real troubleshooting situation.',
    },
    {
        'type': 'mc',
        'question': "You're trying to run a local program named 'tool' in the current folder, but it says not found. Why?",
        'options': [
            "Current directory isn't searched by default; use ./tool",
            'tool is illegal',
            "Linux can't run programs",
        ],
        'answer': 1,
        'answer_text': "Current directory isn't searched by default; use ./tool",
        'explanation': 'You must specify the path to run local executables: ./tool',
        'why': "Explains a common 'but the file is right here' confusion.",
    },
    {
        'type': 'mc',
        'question': "You run 'df -h' and see 100% used. What is a good next command to locate usage?",
        'options': [
            'du -sh *',
            'cat /etc/passwd',
            'echo $PATH',
        ],
        'answer': 1,
        'answer_text': 'du -sh *',
        'explanation': 'du helps locate which folders are consuming disk space.',
        'why': 'Connects symptoms (full disk) to investigation.',
    },
    {
        'type': 'mc',
        'question': "Your terminal says: 'Temporary failure in name resolution'. What does that point to?",
        'options': [
            'DNS/network name resolution issues',
            'GPU issues',
            'A bad keyboard',
        ],
        'answer': 1,
        'answer_text': 'DNS/network name resolution issues',
        'explanation': 'That phrase strongly suggests DNS problems.',
        'why': 'Error message literacy = faster fixes.',
    },
    {
        'type': 'mc',
        'question': 'You suspect your default gateway is wrong. Which command shows the routing table?',
        'options': [
            'ip route',
            'ip file',
            'routepkg',
        ],
        'answer': 1,
        'answer_text': 'ip route',
        'explanation': 'ip route shows default route and gateway.',
        'why': 'Key step for network debugging.',
    },
    {
        'type': 'mc',
        'question': 'You need to verify a port is listening on your machine. A common tool is:',
        'options': [
            'ss -lnt',
            'ls -lnt',
            'apt -lnt',
        ],
        'answer': 1,
        'answer_text': 'ss -lnt',
        'explanation': 'ss can show listening TCP ports; -lnt lists listening numeric TCP.',
        'why': 'Practical networking troubleshooting skill.',
    },
    {
        'type': 'mc',
        'question': 'A program crashes immediately. What is a practical first step to capture clues?',
        'options': [
            'Run it from a terminal to see output',
            'Delete /usr',
            'Change wallpaper',
        ],
        'answer': 1,
        'answer_text': 'Run it from a terminal to see output',
        'explanation': 'Terminal output often includes missing libs, warnings, or stack hints.',
        'why': 'Makes debugging less mysterious.',
    },
    {
        'type': 'mc',
        'question': 'You need to see if a file is a symlink and where it points. Best command?',
        'options': [
            'ls -l <file>',
            'pwd -l <file>',
            'whoami -l <file>',
        ],
        'answer': 1,
        'answer_text': 'ls -l <file>',
        'explanation': "ls -l shows symlink targets as 'name -> target'.",
        'why': 'Symlinks confuse beginners—this clears it up.',
    },
    {
        'type': 'mc',
        'question': "You see 'Broken pipe' in output. In beginner terms, this often happens when:",
        'options': [
            'A program in a pipeline ends early and stops reading',
            'Your Ethernet cable is loose',
            'Your disk is full',
        ],
        'answer': 1,
        'answer_text': 'A program in a pipeline ends early and stops reading',
        'explanation': 'It’s common when piping output and the reader exits before the writer finishes.',
        'why': "Prevents confusion—it's often harmless.",
    },
    {
        'type': 'mc',
        'question': "You see 'Segmentation fault'. In beginner terms, this usually means:",
        'options': [
            'A program crashed due to a bug (invalid memory access)',
            'Your SSD is full',
            'Your keyboard is unplugged',
        ],
        'answer': 1,
        'answer_text': 'A program crashed due to a bug (invalid memory access)',
        'explanation': 'Segfaults are typically application bugs or bad libraries.',
        'why': "Helps you know it's not 'your fault' most of the time.",
    },
    {
        'type': 'mc',
        'question': 'A program works in one terminal but not another. What could explain this?',
        'options': [
            'Different environment variables (PATH), different shell config',
            'Different monitor brightness',
            'Different RAM sticks',
        ],
        'answer': 1,
        'answer_text': 'Different environment variables (PATH), different shell config',
        'explanation': 'Shell config or PATH differences can change command availability.',
        'why': 'Teaches that environment matters.',
    },
    {
        'type': 'mc',
        'question': 'You need to see if permissions allow you to execute a file. Which output helps?',
        'options': [
            'ls -l (look for x bits)',
            'df -h',
            'uname -r',
        ],
        'answer': 1,
        'answer_text': 'ls -l (look for x bits)',
        'explanation': "Execute permission appears as 'x' in the permission string.",
        'why': 'Makes permission troubleshooting concrete.',
    },
    {
        'type': 'mc',
        'question': "A command ends with 'Operation not permitted' even with sudo. One possible reason is:",
        'options': [
            'Filesystem mounted read-only or immutable attribute',
            'Not enough RGB LEDs',
            'Your CPU is old',
        ],
        'answer': 1,
        'answer_text': 'Filesystem mounted read-only or immutable attribute',
        'explanation': 'Some operations are blocked by mount options or file attributes, not just sudo.',
        'why': "Teaches that sudo isn't magic.",
    },
    {
        'type': 'mc',
        'question': "A service won't start because the config has an error. What helps you catch that quickly?",
        'options': [
            'Read logs (systemctl status + journalctl)',
            'Run df -h',
            'Run ls -a',
        ],
        'answer': 1,
        'answer_text': 'Read logs (systemctl status + journalctl)',
        'explanation': 'Services usually log the exact config error.',
        'why': 'Logs are the fastest path to the real cause.',
    },
    {
        'type': 'mc',
        'question': "You type a command and it says: 'Permission denied' on a directory you own. A common cause is:",
        'options': [
            'You lack execute (x) permission on the directory',
            'Your CPU is too fast',
            'Your disk is encrypted',
        ],
        'answer': 1,
        'answer_text': 'You lack execute (x) permission on the directory',
        'explanation': 'On directories, the execute bit controls traversal (entering/accessing).',
        'why': "Directory permissions are a common 'weird' Linux trap.",
    },
    {
        'type': 'mc',
        'question': 'You changed a config file, but the program still uses old values. What is a good next step?',
        'options': [
            'Confirm the program is reading that file (search docs/logs), then restart/reload',
            'Increase screen brightness',
            'Run ls twice',
        ],
        'answer': 1,
        'answer_text': 'Confirm the program is reading that file (search docs/logs), then restart/reload',
        'explanation': 'Sometimes you edited the wrong config file; confirm which file is actually used.',
        'why': 'Teaches verification instead of guesswork.',
    },
    {
        'type': 'type',
        'question': 'Type the command to see your default gateway and routes.',
        'options': [],
        'answer': 'ip route',
        'answer_text': 'ip route',
        'explanation': 'ip route shows routing info including the default gateway.',
        'why': 'A key network troubleshooting check.',
    },
    {
        'type': 'type',
        'question': 'Type the command to view the last 100 lines of /var/log/syslog.',
        'options': [],
        'answer': 'tail -n 100 /var/log/syslog',
        'answer_text': 'tail -n 100 /var/log/syslog',
        'explanation': 'tail prints the end of a file; -n sets the number of lines.',
        'why': 'Quickly see recent events/errors.',
    },
    {
        'type': 'type',
        'question': "Type the command to search for the word 'error' (case-insensitive) inside /var/log/syslog.",
        'options': [],
        'answer': 'grep -i error /var/log/syslog',
        'answer_text': 'grep -i error /var/log/syslog',
        'explanation': '-i makes grep case-insensitive.',
        'why': 'Real-world log hunting.',
    },
    {
        'type': 'type',
        'question': 'Type the command to check the status of the ssh service.',
        'options': [],
        'answer': 'sudo systemctl status ssh',
        'answer_text': 'sudo systemctl status ssh',
        'explanation': 'systemctl status shows whether a service is running and recent messages.',
        'why': 'Common service troubleshooting step.',
    },
    {
        'type': 'type',
        'question': 'Type the command to restart the ssh service.',
        'options': [],
        'answer': 'sudo systemctl restart ssh',
        'answer_text': 'sudo systemctl restart ssh',
        'explanation': 'restart stops then starts a service.',
        'why': 'Applied troubleshooting after config changes.',
    },
    {
        'type': 'type',
        'question': 'Type the command to see recent system/service errors with systemd journal.',
        'options': [],
        'answer': 'journalctl -xe',
        'answer_text': 'journalctl -xe',
        'explanation': 'journalctl views logs; -xe shows recent messages with extra context.',
        'why': 'First stop when something fails unexpectedly.',
    },
    {
        'type': 'type',
        'question': 'Type the command to list listening TCP ports (numeric) using ss.',
        'options': [],
        'answer': 'ss -lnt',
        'answer_text': 'ss -lnt',
        'explanation': 'ss lists sockets; -l listening; -n numeric; -t TCP.',
        'why': 'Checks if a service is actually listening.',
    },
    {
        'type': 'type',
        'question': 'Type the command to see which package owns /usr/bin/ls.',
        'options': [],
        'answer': 'dpkg -S /usr/bin/ls',
        'answer_text': 'dpkg -S /usr/bin/ls',
        'explanation': 'dpkg -S maps a file path to the installed package that provided it.',
        'why': 'Helps trace files back to packages.',
    },
    {
        'type': 'type',
        'question': 'Type the command to test DNS for google.com using nslookup.',
        'options': [],
        'answer': 'nslookup google.com',
        'answer_text': 'nslookup google.com',
        'explanation': 'nslookup asks DNS for the IP address of a name.',
        'why': 'Separates DNS issues from general network issues.',
    },
    {
        'type': 'type',
        'question': 'Type the command to see which process is using listening TCP ports (shows process names).',
        'options': [],
        'answer': 'sudo ss -lntp',
        'answer_text': 'sudo ss -lntp',
        'explanation': 'ss -p shows the process using sockets; listening TCP with names often needs sudo.',
        'why': "Solves 'what is using this port?' quickly.",
    },
]
